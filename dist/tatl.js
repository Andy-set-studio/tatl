!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,t(e.tatl={}))}(this,function(e){"use strict";function t(e,t){"customElements"in window&&customElements.define(e,t)}class s extends HTMLElement{constructor(e){super(),this._props=e.props||{},this._state=e.state||{},this._get=e.get||{},this._set=e.set||{},this.get=this._processGetters(),this.props=this._processProps(),this.state=this._monitor(this._state),this.root=this._processRoot(),this.render=e.render||null,this.ready=e.ready||null,this.removed=e.removed||null}connectedCallback(){this._processRender(),"function"==typeof this.ready&&this.ready()}disconnectedCallback(){"function"==typeof this.removed&&this.removed()}attributeChangedCallback(){this.props=this._processProps(),this._processRender()}_monitor(e){const t=this;return new Proxy(e,{set(e,s,r){if(e[s]!==r)return t._set.hasOwnProperty(s)?e[s]=t._set[s](r,t.state[s]):e[s]=r,t._processRender(),!0}})}_processRender(){(this.render?this.render():"").length&&(this.root.innerHTML=this.render())}_processProps(){let e={};return Object.keys(this._props).forEach(t=>{let s={};let r=this._props[t];let n=this._getAttribute(t);r.default&&(s[t]=r.default);if(r.required&&!n)r.default&&console.warn(`Required attribute '${t}' has no value set, so the default has been set`),s[t]=null,console.error(`Required attribute '${t}' has no value set`);else switch(r.type){case String:default:s[t]=n;break;case Number:s[t]=parseInt(n,10);break;case Boolean:s[t]="true"===n;break;case Object:try{s[t]=JSON.parse(n)}catch(e){s[t]={},console.error(`Tatl prop parse issue. Type = Object. Error = "${e}"`)}}e[t]=s[t]}),e}_processGetters(){const e=this;let t={},s=Object.keys(e._get);return s.length?(s.forEach(s=>{Object.defineProperty(t,s,{get(){return e._get[s].bind(e)()}})}),t):t}_processRoot(e){switch(e){case"standard":default:return this;case"shadow":return this.attachShadow({mode:"open"});case"shadow:closed":return this.attachShadow({mode:"closed"})}}_getAttribute(e){e=e.replace(/([A-Z])/g,"-$1");try{return this.getAttribute(e)}catch(e){return console.error(`Get attribute error: ${e}`),""}}}e.default=s,e.componentLoader=t,Object.defineProperty(e,"__esModule",{value:!0})});
